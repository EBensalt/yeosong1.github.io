# 광선-구 교차

Contents
- [Parametric and Implicit Surfaces](rt-A-Minimal-Ray-Tracer)
- [광선-구 교차](rt-광선-구-교차)
- [미니멀 레이 트레이서: 구 렌더링 하기](rt-미니멀레이트레이서)
- Ray-Plane과 Ray-Disk 교차
- Ray-Box 교차
- 소스 코드

구체와 광선을 교차시키는 것은 아마도 가장 간단한 형태의 광선-기하 교차 테스트 일 것입니다.
이것이 많은 레이 트레이서가 구체의 이미지를 보여주는 이유입니다.
또한 (단순성으로 인해) 매우 빠르다는 이점이 있습니다.
그러나 안정적으로 작동하게 하려면 항상 주의를 기울여야하는 subtitle이 몇 개 있습니다.

이 테스트는 본질적으로 두 가지 방법을 사용하여 구현할 수 있습니다.
첫번째는 기하를 사용하여 문제를 해결합니다. 두번째 기술은, 종종 더 선호되는 솔루션인데(2차quadric 표면이라고 부르는 더 넓은 범위의 표면에 재사용 할 수 있기 때문에 선호됨), 분석적인(또는 대수, 예를 들어 닫힌 형태 표현을 사용하여 해석할 수 있음) 솔루션을 사용합니다.

## 기하학적 해법

광선-구 교차점 테스트에 대한 기하학적 솔루션은 간단한 수학에 의존합니다.
주로 기하학, 삼각법, **피타고라스 정리**이지요.
그림 1을 보면 광선이 구와 교차하는 점에 해당하는 점 P 와 P'의 위치를 찾으려면 t0 및 t1의 값을 찾아야 한다는 것을 이해할 것입니다.

![raysphereisect1](https://user-images.githubusercontent.com/53321189/87069125-a1264200-c251-11ea-92d2-752de15aaca1.png)

~~~
그림 1 : 구체와 교차하는 광선과 기하학적 및 분석 솔루션과 광선 구체 교차를 해결하는 데 사용할 다양한 용어.
~~~

광선은 다음과 같은 **파라메트릭 형식**을 사용하여 표현할 수 있습니다.

<img width="151" alt="스크린샷 2020-07-10 오전 2 04 15" src="https://user-images.githubusercontent.com/53321189/87069165-b00cf480-c251-11ea-8af0-3ef25510fcf0.png">

여기서 O는 광선의 원점을 나타내고, D는 광선 방향direction(보통 정규화 되어있음)입니다.
t의 값을 변경하면 광선을 따라 위치를 정의 할 수 있습니다.
t가 0보다 큰 경우, 점은 광선의 원점 앞에 위치하며(선을 내려다 보는)
t가 0일 때 점은 광선의 원점(O)과 일치하고
t가 0보다 작은 경우 점 원점 뒤에 있습니다.
그림 1을 보면 t_ca에서 t_hc를 빼서 t0을 찾을 수 있고 t_hc를 t_ca에 더하면 t1을 찾을 수 있습니다.
광선 파라 메트릭 방정식을 사용하여 t0, t1을 찾은 다음, P와 P'를 찾을 수 있는
이 두 값(t_hc 및 t_ca)을 계산하는 방법을 찾는 것만으로도 충분합니다.

<img width="149" alt="스크린샷 2020-07-10 오전 2 04 52" src="https://user-images.githubusercontent.com/53321189/87069219-c9ae3c00-c251-11ea-8087-270b401a3bc8.png">

우리는 가장자리 L, t_ca 및 d에 의해 형성된 삼각형이 직각 삼각형임을 주목하면서 시작할 것입니다.
O(레이 원점)와 C(구 중심) 사이의 벡터인 L을 쉽게 계산할 수 있습니다.
우리는 t_ca에 대해 아무것도 모르지만 삼각법을 사용하여 이 문제를 해결할 수 있습니다.

	
b&#8407; 

우리는 L을 알고 광선의 방향인 D를 알고 있습니다. 또한 벡터 b⃗와 a of의 내적 (또는 스칼라) 곱은 b a를 벡터 a⃗에 의해 정의 된 선에 투영하는 것에 해당하며,이 투영 결과는 그림 2에 표시된 세그먼트 AB의 길이입니다. 내적 제품의 속성에 대한 자세한 내용은 형상 레슨을 확인하십시오.

Figure 2: a⃗ ⋅b⃗ =|a||b|cosθ.

<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow class="MJX-TeXAtom-ORD">
    <mover>
      <mi>b</mi>
      <mo stretchy="false">&#x2192;<!-- → --></mo>
    </mover>
  </mrow>
</math>

------------------------
[이전 장 ->](rt-A-Minimal-Ray-Tracer)          Chapter 2 of 6         [다음 장 ->](rt-미니멀레이트레이서)
