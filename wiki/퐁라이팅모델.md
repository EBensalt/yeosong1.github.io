# Basic Lighing

실제 세계에서의 라이팅은 극도로 복잡하고, 우리가 제한된 프로세싱 파워로 다 연산하지 못할 정도로 많은 요인들과 관련이 있습니다.<br>
그래서 OpenGL에서의 라이팅은 단순화 모델을 사용한 현실의 근사치를 기반으로 합니다.<br>
단순화 모델은 훨씬 프로세싱하기 쉽고 비교적 단순합니다. 이런 라이팅 모델들은 우리가 이해하는 빛의 물리학이 기반입니다.<br>
그중 하나가 퐁 라이팅 모델이라고 불리는 것 입니다. 퐁 라이팅 모델의 메인 빌딩 블록은 3가지 구성요소로 이루어져 있습니다.<br>
Ambient(주변광), Diffuse(확산), Specular(반사광).<br>
아래에서 이 요소들이 각각 어떻게 보이는지와 합쳤을 때 어떻게 보이는지를 확인할 수 있습니다.

![](https://learnopengl.com/img/lighting/basic_lighting_phong.png)

- **Ambient Lighting**: 어두울 때도 여전히 약간의 빛이 어딘가에는 있습니다. (달, 멀리있는 빛 등) 그러므로 물체는 언제나 완전히 검정은 아닙니다. 이것을 시뮬레이팅 하기 위해 앰비언트 라이팅 상수를 쓸 것입니다. 이 상수는 물체에게 항상 약간의 색을 줍니다.
- **Diffuse Lighting**:  조명 오브젝트가 오브젝트에 미치는 방향성 영향을 시뮬레이션합니다. 이것은 조명 모델에서 시각적으로 가장 중요한 구성 요소입니다. 물체의 일부가 광원을 향할수록 더 밝아집니다.
- **Specular Lighting**: 반짝이는 물체에 나타나는 빛의 밝은 부분을 시뮬레이션합니다. 반사광 하이라이트는 물체의 색상보다 빛의 색상에 더 기울어집니다.

우리는 시각적으로 흥미로운 장면을 만들기 위해 최소한이 세 가지 조명 구성 요소를 시뮬레이션하고 싶습니다. 가장 간단한 ambient lighting부터 시작하겠습니다

# ambient lighting

빛은 일반적으로 단일 광원에서 나오는 것이 아니라 우리 주변에 흩어져있는 많은 광원에서 옵니다.<br>
빛의 특성 중 하나는 여러 방향으로 산란 및 반사되어 직접 보이지 않는 지점에 도달할 수 있다는 것입니다.<br>
따라서 빛은 다른 표면에 반사돼서 물체의 조명에 간접적인 영향을 미칠 수 있습니다.<br>
이를 고려한 알고리즘을 ”글로벌 일루미네이션 알고리즘”이라고 하지만, 계산하기가 복잡하고 연산비용이 많이 듭니다.<br>
우리는 복잡하고 비싼 알고리즘 안좋아하니까 매우 단순한 글로벌 일루미네이션 모델,<br>
즉 ambient lighting을 사용하여 시작하겠습니다.<br>
이전 섹션에서 보았듯이 우리는 물체 조각의 최종 결과 색상에 추가하는 작은 상수(밝은)색상을 사용하므로<br>
직접 광원이 없는 경우에도 항상 산란된 빛이 있는 것처럼 보이게합니다.<br>
장면에 주변 조명을 추가하는 것은 정말 쉽습니다.<br>
우리는 **빛의 색을 가져다가 작은 일정한 주변 인자로 곱하고,**<Br>
이것을 **개체의 색과 곱하고,**<br>
그것을 **큐브 개체의 셰이더에서 조각의 색으로 사용**합니다.

~~~
void main ()
{
    float ambientStrength = 0.1;
    vec3 ambient = ambientStrength * lightColor; // 엠비언트 = 엠비언트 강도 * 빛 색;

    vec3 result = ambient* objectColor; // 결과 = 엠비언트 * 개체 색;
    FragColor = vec4 (result, 1.0); 
}
~~~

이제 프로그램을 실행하면 조명의 첫 번째 단계가 개체에 성공적으로 적용되었음을 알 수 있습니다.<br>
오브젝트는 매우 어둡지만 주변 조명이 적용되었기 때문에 완전히는 아닙니다.<br>
(다른 셰이더를 사용하기 때문에 라이트 큐브는 영향을 받지 않습니다). 다음과 같이 보일 것입니다.

![](https://learnopengl.com/img/lighting/ambient_lighting.png)


# Diffuse lighting

ambient lighting 자체는 가장 흥미로운 결과를 생성하지 못하지만 확산 조명은 물체에 상당한 시각적 영향을 주기 시작합니다.<br>
확산 조명은 **조각이 광원의 광선에 더 가깝게 정렬될수록 개체에 더 많은 밝기**를 제공합니다.<br>
확산 조명에 대해 더 잘 이해하려면 다음 이미지를 살펴보십시오.

![](https://learnopengl.com/img/lighting/diffuse_light.png)

왼쪽에는 물체의 단일 조각을 겨냥한 광선이 있는 광원이 있습니다.<br>
광선이 조각에 닿는 각도를 측정해야합니다. 광선이 물체 표면에 수직이면 빛이 가장 큰 영향을 미칩니다.<br>
광선과 조각 사이의 각도를 측정하기 위해 우리는 **법선 벡터**라는 것을 사용합니다.<br>
이것은 **조각의 표면에 수직인 벡터**입니다 (여기서는 노란색 화살표로 표시됨).<br>
나중에 설명하겠습니다. 두 벡터 사이의 각도는 **내적(dot product)**을 사용하여 쉽게 계산할 수 있습니다.<br>

transformation 챕터 기억나시나요? 두 단위 벡터 사이의 **각도가 낮을수록 내적은 값 1을 향해 더 많이 기울어집니다.**<br>
**두 벡터 사이의 각도가 90도이면 내적은 0**이됩니다. θ에도 동일하게 적용됩니다. θ가 클수록 빛이 조각의 색상에 미치는 영향이 적습니다.

~~~
두 벡터 사이의 각도의 코사인만 구하려면
단위 벡터(= 길이가 1인 벡터)로 작업하므로
모든 벡터가 정규화되었는지 확인해야합니다.
그렇지 않으면 내적은 코사인 이상을 리턴 합니다.
(Transformations 참조).
~~~

따라서 결과 내적은 조각의 색상에 대한 빛의 영향을 계산하는 데 사용할 수있는 스칼라를 반환하여 빛을 향한 방향에 따라 다른 조명 조각을 생성합니다.
