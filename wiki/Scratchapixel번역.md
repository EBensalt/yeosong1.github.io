
# Scratchapixel 2.0 번역......

Contents
- [레이 정의 하기]
- [카메라 레이 만들기](카메라-레이-만들기)
- [표준 좌표계](표준좌표계)
- [소스 코드](소스코드)

**키워드: camera ray, primary ray, camera, ray-tracing, ray.**

**선수강 조건**
- 포인트, 벡터, 행렬, 카메라 및 삼각법 사용(기하학 레슨 참고) 
- 서로 다른 좌표계의 정점(vertex)과 벡터 간의 변환(Computing the Pixel of a 3D Point 참고)
(기하학에서 Vertex(vertices, vertexes) = "정점" = 2개 이상의 곡선, 선, 모서리 등이 만나는 점)
- 3D Viewing: the Pinhole Camera Model 레슨에 나오는 개념들
- 이 레슨을 읽기 전에 위 내용들을 다뤘는지 확인하십시오.

**이건 뭐에 관한 레슨인가**
Ray-Tracing에 대한 입문 강좌에서, 우리는 이미 가시성 문제를 해결을 위해 레이 트레이싱이 어떻게 사용되는지에 대해 이미 빠르게 언급했습니다.
3D 렌더링에서 보이는 표면을 결정하는 프로세스는, 카메라를 통해 장면의 어느 부분을 볼 수 있는지 결정하기 위해 사용된다는 걸 기억해보자.
우리는 가시성을 계산하기 위해 레이 트레이싱을 사용할 수 있다.(이건 이미 이전 레슨에서 설명했음)
이미지의 각 픽셀을 통해 광선을 캐스팅하고 이 광선이 교차하는(교차 한다면) 가장 가까운 물체를 찾음으로써 계산할 수 있다.
레이 캐스팅이 광선들과 표면들 간의 교차를 계산하는 기술이라는 것도 복기해보자.
레이 트레이싱을 사용해서 가시성을 계산하는 것은 레이 캐스팅이라고도 합니다.. ??

> 유클리드 공간에 장애물 세트가 주어지면, 그 공간을 연결하는 선분이 장애물과 교차하지 않으면 공간의 두 점이 서로에게 보인다고 할 수 있다.
> (위키피디아, '가시성'의 정의)

레이 트레이싱을 사용해서 가시성을 해결하기 위해 이미지를 생성하려면?
이미지 내의 모든 픽셀을 루프 시켜서
각 픽셀에 대해 광선을 만들고
이 광선을 장면에 캐스트해서
이 광선과 표면들 사이의 가능한 교차를 찾아야 한다.

이 광선들을 primary rays(혹은 camera, eye rays)라고 부른다.
이것들이 처음으로 장면에 캐스트 되는 광선들이기 때문이다.
(secondary rays는 그림자, 반사, 굴절 등등을 계산할 때 쓰인다)

광선이 표면과 교차하는지 확인하려면,
이 광선에 대해 가능한 교차점이 있는지
장면 속의 각 물체를 테스트를 해야한다.

광선은 1개 이상의 표면을 교차할 것이다. 보이는 표면은 교차 거리가 가장 가까운 표면이다.
교차 거리를 이용해서 우리는 광선의 원점(=origin // primary ray일 경우, 카메라)와 교차점으로부터의 거리를 구할 수 있다.

~~~
for (int j = 0; j < height; ++j) { 
    for (int i = 0; i < width; ++i) { 
        // primary ray 생성 (이게 이 레슨의 내용이다)
        ... 
        float tnear = INFINITY; // closest intersection, set to INFINITY to start with 
        for (int k = 0; k < numObjects; ++k) { 
             float t = INFINITY; // 현재의 오브젝트가 있으면 교차 
             if objects[k]->intersect(pimaryRay, tnear) && t < tnear) { 
                 tnear = t; 
                 framebuffer= objects[k].color; 
            } 
        } 
    } 
} 
~~~

이 레슨에서
1. 광선의 개념을 공식화할 것이다.
2. 핀홀 카메라를 본뜨기 위해 primary rays를 생성하는 방법을 공식화 할 것이다.

우리가 primary rays가 어떻게 생성되는지를 이해하고 나면
다음 단계는 광선-도형 간의 교차를 계산하는 몇 가지 테크닉을 학습하는 것이다.

이것들은 레이 트레이싱으로 3D 오브젝트 이미지를 만들기 위한 최소한의 요구사항이다.

~~~
ray-tracing 광선 추적 및 perspective projection 원근 투영에 대한 참고 사항 :
핀홀 카메라 모델은 CG에서 가장 간단하게 시뮬레이션 할 수 있습니다.
래스터 화와 마찬가지로 레이 트레이싱에도 사용할 모델입니다. 이미지들은 이 모델로 형성됩니다.
핀홀 카메라로 그려진 3D에서 2D로의 매핑은 perspective projection임을 기억하세요.
~~~

이 챕터에서 우리는 광선에 관한 몇 가지 유용한 것들을 배울 것입니다.
다음 챕터에서 우리는 어떻게 primary rays가 계산되는지 배울 것입니다.

## 레이 정의 하기
