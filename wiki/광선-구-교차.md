# 광선-구 교차

Contents
- [Parametric and Implicit Surfaces]()
- [광선-구 교차](광선-구-교차)
- [미니멀 레이 트레이서: 렌더링 영역](미니멀레이트레이서)
- Ray-Plane과 Ray-Disk 교차
- Ray-Box 교차
- 소스 코드

구체와 광선을 교차시키는 것은 아마도 가장 간단한 형태의 광선-지오메트리 교차 테스트 일 것입니다. 이것이 많은 광선 추적기가 구체의 이미지를 보여주는 이유입니다. 또한 (단순성으로 인해) 매우 빠르다는 이점이 있습니다. 그러나 안정적으로 작동하게하려면 항상주의를 기울여야하는 자막이 몇 개 있습니다.

이 테스트는 본질적으로 두 가지 방법을 사용하여 구현할 수 있습니다. 첫 번째는 지오메트리를 사용하여 문제를 해결합니다. 종종 선호되는 솔루션 인 두 번째 기술 (2 차 표면이라고하는 더 넓은 범위의 표면에 재사용 할 수 있기 때문에)은 분석 (또는 대수, 예를 들어 닫힌 형태 표현을 사용하여 해석 할 수 있음) 솔루션을 사용합니다.

## 기하학적 해법

광선-구 교차점 테스트에 대한 기하학적 솔루션은 간단한 수학에 의존합니다. 주로 기하학, 삼각법 및 피타고라스 정리. 그림 1을 보면 광선이 구와 교차하는 점에 해당하는 점 P 및 P'의 위치를 찾으려면 t0 및 t1의 값을 찾아야 한다는 것을 이해할 것입니다.

![raysphereisect1](https://user-images.githubusercontent.com/53321189/87069125-a1264200-c251-11ea-92d2-752de15aaca1.png)

~~~
그림 1 : 구체와 교차하는 광선과 기하학적 및 분석 솔루션과 광선 구체 교차를 해결하는 데 사용할 다양한 용어.
~~~

광선은 다음과 같은 파라메트릭 형식을 사용하여 표현할 수 있습니다.

<img width="151" alt="스크린샷 2020-07-10 오전 2 04 15" src="https://user-images.githubusercontent.com/53321189/87069165-b00cf480-c251-11ea-8af0-3ef25510fcf0.png">

여기서 O는 광선의 원점을 나타내고 D는 광선 방향 (일반적으로 정규화 됨)입니다. t의 값을 변경하면 광선을 따라 위치를 정의 할 수 있습니다. t가 0보다 큰 경우, 점은 광선의 원점 앞에 위치하며 (선의 방향을보고) t가 0 일 때 점은 광선의 원점 (O)과 일치하고 t가 음의 경우 점 그 기원 뒤에 있습니다. 그림 1을 보면 tca에서 thc를 빼서 t0을 찾을 수 있고 tc를 tca에 이번에 더하면 t1을 찾을 수 있습니다. 광선 파라 메트릭 방정식을 사용하여 t0, t1을 찾은 다음 P와 P '를 찾을 수있는이 두 값 (thc 및 tca)을 계산하는 방법을 찾는 것만으로도 충분합니다.

<img width="149" alt="스크린샷 2020-07-10 오전 2 04 52" src="https://user-images.githubusercontent.com/53321189/87069219-c9ae3c00-c251-11ea-8087-270b401a3bc8.png">

우리는 가장자리 L, tca 및 d에 의해 형성된 삼각형이 직각 삼각형임을 주목하면서 시작할 것입니다. O (레이 원점)와 C (구 중심) 사이의 벡터 인 L을 쉽게 계산할 수 있습니다. 우리는 tca에 대해 아무것도 모르지만 삼각법을 사용 하여이 문제를 해결할 수 있습니다.

우리는 L을 알고 광선의 방향 인 D를 알고 있습니다. 또한 벡터 b⃗와 a of의 내적 (또는 스칼라) 곱은 b a를 벡터 a⃗에 의해 정의 된 선에 투영하는 것에 해당하며,이 투영 결과는 그림 2에 표시된 세그먼트 AB의 길이입니다. 내적 제품의 속성에 대한 자세한 내용은 형상 레슨을 확인하십시오.

Figure 2: a⃗ ⋅b⃗ =|a||b|cosθ.

<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow class="MJX-TeXAtom-ORD">
    <mover>
      <mi>b</mi>
      <mo stretchy="false">&#x2192;<!-- → --></mo>
    </mover>
  </mrow>
</math>

------------------------
[이전 장 ->](rt-A-Minimal-Ray-Tracer)          Chapter 2 of 6         [다음 장 ->](미니멀레이트레이서)
